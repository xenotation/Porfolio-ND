{{ define "main" }}

<link rel="stylesheet" href="/css/bio-pages.css">
<script src="{{ "/js/spinner.js" | relURL }}" defer></script>

{{/* Pull data from the current language */}}
{{ $personName   := or .Params.name .Site.Language.Params.name }}
{{ $descr        := or .Params.description .Site.Language.Params.Description }}
{{ $jobTitle     := or .Params.jobTitle .Site.Language.Params.jobTitle }}
{{ $profileImage := or .Params.profile_image .Site.Language.Params.profileImage }}
{{ if $profileImage }}{{ $profileImage = $profileImage | absURL }}{{ end }}

{{/* SAMEAS from global params (no mailto) */}}
{{ $sameAs := .Site.Params.params_sameas_other | default (slice) }}

{{/* Build Person object */}}
{{ $person := dict
  "@type"        "Person"
  "name"         $personName
  "alternateName" .Site.Language.Params.alternateName
  "jobTitle"     $jobTitle
  "nationality"  "Bulgarian"
  "url"          .Permalink
  "knowsLanguage" (slice "bg" "en")
}}
{{ if $profileImage }}{{ $person = merge $person (dict "image" $profileImage) }}{{ end }}
{{ if gt (len $sameAs) 0 }}{{ $person = merge $person (dict "sameAs" $sameAs) }}{{ end }}

{{/* Build AboutPage object (no graph, no extras) */}}
{{ $about := dict
  "@context"   "https://schema.org"
  "@type"      "AboutPage"
  "url"        .Permalink
  "name"       .Title
  "description" $descr
  "inLanguage"  .Site.Language.Lang
  "mainEntity"  $person
}}

<script type="application/ld+json">
{{ $about | jsonify | safeHTML }}
</script>

<div class="biolist">
  <h1 class="page-heading">{{ .Title }}</h1>

  <!-- Eye block (decorative only) -->
  <div class="eye" aria-hidden="true">
    <img class="eye-base"  src="/images/i_see_you_O.png" alt="">
    <img class="eye-pupil" src="/images/i_see_you_I.png" alt="">
  </div>

  <!-- Links -->
  <section class="about-meta container--press">
    <ul class="press-list" role="list">
      {{ with .Site.Params.social.instagram }}
        <li class="press-item"><h3 class="press-titleline">
          <a class="press-link" href="{{ . | safeURL }}" target="_blank" rel="me noopener nofollow">Instagram</a>
        </h3></li>
      {{ end }}

      {{ with .Site.Params.social.email }}
        <li class="press-item"><h3 class="press-titleline">
          <a class="press-link" href="{{ . | safeURL }}">Email</a>
        </h3></li>
      {{ end }}

      {{ with .Site.Params.social.facebook }}
        <li class="press-item"><h3 class="press-titleline">
          <a class="press-link" href="{{ . | safeURL }}" target="_blank" rel="me noopener nofollow">Facebook</a>
        </h3></li>
      {{ end }}

      {{ with .Site.Params.social.youtube }}
        <li class="press-item"><h3 class="press-titleline">
          <a class="press-link" href="{{ . | safeURL }}" target="_blank" rel="noopener nofollow">YouTube</a>
        </h3></li>
      {{ end }}

      {{ with (index .Site.Params.documents.cv_pdf .Site.Language.Lang) }}
        <li class="press-item"><h3 class="press-titleline">
          <a class="press-link" href="{{ . | absURL | safeURL }}" target="_blank" rel="noopener nofollow">CV (PDF)</a>
        </h3></li>
      {{ end }}

      {{ with (index .Site.Params.documents.portfolio_pdf .Site.Language.Lang) }}
        <li class="press-item"><h3 class="press-titleline">
          <a class="press-link" href="{{ . | absURL | safeURL }}" target="_blank" rel="noopener nofollow">{{ T "portfolio" | default "Portfolio" }}</a>
        </h3></li>
      {{ end }}
    </ul>
  </section>

  <div class="about-body">
    <div class="about-text">{{ .Content }}</div>
  </div>
</div>

{{ end }}
